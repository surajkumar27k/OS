/* --- 1. GLOBAL & THEME VARIABLES --- */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

:root{
  /* Shared variables */
  --radius: 10px;
  --max-width: 1100px;
  --container-pad: 20px;
  
  /* Light Theme Variables (Default) */
  --bg: #fbfbfd;
  --page-bg: linear-gradient(180deg,#f7fbff 0%, var(--bg) 100%);
  --card: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --accent: #2563eb; /* Primary blue */
  --accent-2: #06b6d4; /* Secondary cyan */
  --muted-border: #e6e6ef;
  --muted-bg: #fafafa;
  --danger: #ff6b6b;
  --shadow-color: rgba(0, 0, 0, 0.08); /* Unified Shadow */
}

/* Dark theme overrides */
:root.dark {
  --bg: #0b1020;
  --page-bg: linear-gradient(180deg,#07070a 0%, #0b1020 100%);
  --card: #1e293b; 
  --text: #e6eef8;
  --muted: #94a3b8;
  --accent: #726cf8; /* Deep Purple/Indigo for dark mode */
  --accent-2: #40e0d0;
  --muted-border: #334155;
  --muted-bg: #111827;
  --danger: #ff7b7b;
  --shadow-color: rgba(0, 0, 0, 0.4);
}

/* --- 2. BASE & RESET --- */
*{box-sizing:border-box; margin:0; padding:0}
html,body{height:100%}

body{
  font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: var(--text);
  background: var(--page-bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  transition: background 240ms ease, color 240ms ease;
  min-height: 100vh;
}

/* --- 3. LAYOUT & HEADER --- */
.container{
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 0 var(--container-pad);
}

.site-header{
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color:white;
  padding:18px 0;
  margin-bottom:18px;
  border-bottom-left-radius: var(--radius);
  border-bottom-right-radius: var(--radius);
  position: relative;
  z-index: 10;
}
.header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.header-left{flex:1}
.header-right{display:flex;align-items:center;gap:10px}

.project-title{margin:0;font-size:1.4rem;font-weight:700}
.project-tagline{margin:0.1rem 0 0;font-size:0.95rem;opacity:0.95}

.top-nav a{
  color:rgba(255,255,255,0.95);
  margin-left:18px;
  text-decoration:none;
  font-weight:600;
  font-size:0.95rem;
}

/* Theme toggle */
.theme-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:38px;
  height:38px;
  border-radius:8px;
  border:0;
  background: rgba(255,255,255,0.08);
  color: white;
  cursor:pointer;
  transition: background 160ms ease;
}
.theme-toggle:hover{background: rgba(255,255,255,0.12)}
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}

/* --- 4. HERO & CARDS --- */
.hero{display:flex;gap:24px;align-items:stretch;margin:20px 0}
.hero-left{flex:2}
.hero-right{flex:1}
.lead{font-size:1.05rem;color:var(--muted);margin-top:8px}

.card, .dashboard {
  background: var(--card);
  border-radius: var(--radius);
  padding: 1.5rem;
  box-shadow: 0 6px 18px var(--shadow-color);
  margin-bottom: 12px;
  border: 1px solid var(--muted-border);
  transition: background 240ms ease, border-color 240ms ease;
  position: relative;
  z-index: 1;
}

/* Specific component overrides */
.card {
  max-width: 530px;
  margin-top: 5vh;
  width: 96vw;
  box-shadow: 0 8px 32px var(--shadow-color);
}

.dashboard {
  max-width: 96vw;
  margin-top: 16px;
  margin-bottom: 4vh;
  border-radius: 1rem;
  padding: 1.3rem 1.8rem 2.4rem 1.8rem;
  text-align: center;
}

.title { 
  font-size: 2.2rem; font-weight: bold; letter-spacing: 1px; margin-bottom: 1rem; 
  color: var(--accent);
  text-align: center;
}
.desc { font-size: 1.13rem; margin-bottom: 1.5rem; text-align: center; opacity: .93;}
.info { font-size: 1rem; line-height: 1.72; color: var(--text); margin-bottom: 1.7rem; text-align: center;}
.footer { font-size: .93rem; opacity: .82; margin-top: 1rem; color: var(--muted); text-align: center;}

/* --- 5. BUTTONS & CONTROLS --- */
.cta{margin-top:16px}
.btn{
  display:inline-block;padding:10px 14px;border-radius:8px;background:var(--accent);color:white;text-decoration:none;font-weight:600;margin-right:8px;border:none;cursor:pointer;
  transition: background 0.2s, filter 0.2s;
}
.btn.ghost{
  background:transparent;
  color:var(--accent);
  border:2px solid var(--accent); /* Consistent border for ghost button */
  box-shadow:none
}
.btn:hover{filter:brightness(1.1)}
.btn.ghost:hover{background:rgba(37,99,235,0.05)}


.sched-btns { display: flex; gap: 12px; justify-content: center; margin-bottom: 18px; flex-wrap: wrap;}
.sched-btn {
  padding: 0.44rem 1.3rem; border: none; border-radius: 7px;
  background: var(--muted-bg);
  color: var(--muted);
  cursor: pointer; font-weight: bold; font-size: 1rem; transition: background .12s;
}
.sched-btn.active, .sched-btn:hover {
  background: linear-gradient(90deg, var(--accent), var(--danger));
  color: #fff; 
  border: 1px solid var(--accent); /* Highlight border on hover/active */
}

.dropdown, .add-btn { 
  font-size: 0.97rem; padding: 7px 13px; border-radius: 6px; 
  border: 1px solid var(--accent); 
  background: var(--muted-bg); 
  color: var(--text); 
  outline: none;
}
.add-btn { 
  font-weight: bold; cursor: pointer; 
  background: var(--accent-2);
  border: none;
  color: white;
}
.add-btn:hover {filter: brightness(1.1);}

/* --- 6. SIMULATION COMPONENTS --- */
.controls .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.controls label{font-weight:600;color:var(--muted);margin-right:4px}
.controls input[type="number"], .controls select{
  padding:6px;
  border-radius:6px;
  border:1px solid var(--muted-border);
  min-width:100px;
  background:transparent;
  color:var(--text);
}

/* Bar / Resource Display */
.bars { margin-bottom: 18px; text-align: left; width: 90%; margin-left: 5%;}
@media (max-width: 640px) {.bars{width:98%;margin-left:1%;}}
.bar-block { margin-bottom: 9px; }
.bar-label { font-size: .97rem; margin-bottom: 3px; display: block;}
.bar-bg { background: var(--muted-bg); border-radius: 12px; height: 22px; width: 95%; position: relative; overflow: hidden; margin-bottom: 1px; box-shadow: 0 2px 6px rgba(0,0,0,.07);}
.bar-fill { height: 100%; border-radius: 12px; transition: width .7s; position: absolute; left: 0; top: 0;}
.cpu-color {background: linear-gradient(90deg,var(--danger) 40%,#f8ed72 100%);}
.mem-color {background: linear-gradient(90deg,var(--accent-2),#4fe5aa);}
.space-color {background: linear-gradient(90deg,#8a2387,#e94057, #f27121);}


/* Task Table */
.task-table-wrap { max-width: 95vw; overflow-x: auto; margin-bottom: 18px; margin-top: 7px;}
.task-table { width: 100%; border-collapse: collapse; margin-bottom: 2px; font-size: .96rem;}
.task-table th, .task-table td { border: none; padding: .45rem .18rem .42rem .18rem; text-align: center; font-size: .99rem;}
.task-table th { 
  background: var(--muted-bg);
  color: var(--accent);
  font-weight: 700; border-radius: .55rem; letter-spacing: .02em;
}
.task-table td { 
  background: var(--card);
  color: var(--text); 
  border-radius: .41rem; font-weight: 500;
}
.task-table tr.running td { 
  background: linear-gradient(90deg,var(--accent),var(--danger)); 
  color: #fff; font-weight: bold;
}
.task-table tr.pending td { color: var(--accent-2);}


/* Timeline / Gantt */
.timeline-wrap { margin-top: 14px;}
.timeline { 
  height: 52px; background: var(--muted-bg); 
  border-radius: 1rem; display: flex; align-items: center; 
  overflow-x: auto; margin-bottom: 2px; min-width: 170px;
}
.task-block { 
  height: 36px; min-width: 70px; margin-right: 5px; border-radius: 8px; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.13); color: #fff; display: flex; 
  align-items: center; justify-content: center; font-weight: bold; 
  font-size: 1.07rem; opacity: .97; transition: outline 0.35s;
}
.task-block.active { outline: 2.5px solid #22c55e;}
.critical { background: linear-gradient(90deg,var(--accent),var(--danger));}
.noncritical { background: linear-gradient(90deg,var(--accent-2),#4fe5aa); color: #222855;}
.idle { background: linear-gradient(90deg,#555,#aaa); color: #222;}

/* Dialogue / Console */
.dialogue { 
  font-size: 1.05rem; 
  background: var(--muted-bg); 
  border: 1px solid var(--muted-border); 
  border-radius: .8rem; padding: 0.99rem .6rem .65rem .97rem; 
  color: var(--text); min-height: 38px; margin-top: 13px; 
  margin-bottom:5px; box-shadow: 0 2px 10px rgba(0,0,0,0.11); 
  text-align: left; max-width: 520px; width:96vw; margin-left: auto; margin-right: auto;
}

/* --- 7. FOOTER & MISC --- */
.site-footer{padding:18px 0;text-align:center;color:var(--muted);font-size:0.95rem;margin-top:24px}

.features{margin:20px 0}
.features .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
.features article{background:var(--card);padding:14px;border-radius:8px;box-shadow:0 6px 18px rgba(2,6,23,0.04)}

.demo-controls{margin-bottom:10px}
.gantt-container{
  min-height:180px;
  padding:12px;
  border-radius:8px;
  /* FIX: Add horizontal scrolling to prevent content overflow */
  overflow-x: auto; 
}
.gantt-placeholder{display:flex;align-items:center;justify-content:center;color:var(--muted);height:140px}

.metrics{margin-top:12px;padding:12px}
.sample-json{
  white-space:pre-wrap;
  background:var(--muted-bg);
  padding:12px;
  border-radius:6px;
  border:1px solid var(--muted-border);
  color:var(--text);
}

/* SVG Gantt tweaks */
.gantt-svg {
  /* Ensure the SVG can grow wider than the container when needed */
  display: block; 
  min-width: 100%; 
}
.gantt-svg text { fill: var(--muted); }
:root.dark .gantt-svg text { fill: var(--muted); }

/* --- 8. BACKGROUND LAYERS (For WebGL) --- */

/* Canvas layering and content stacking */
#gl-bg-canvas {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  display: block;
}

/* Ensure content stacks above background canvas */
body > *:not(#gl-bg-canvas) { position: relative; z-index: 1; }

/* Animated gradient overlay for extra depth */
.gl-bg-overlay {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  mix-blend-mode: overlay;
  opacity: 0.08;
  background: linear-gradient(120deg, rgba(37,99,235,0.12), rgba(6,182,212,0.10), rgba(99,102,241,0.08));
  animation: glBgShift 14s ease-in-out infinite;
}
:root.dark .gl-bg-overlay {
  opacity: 0.09;
  background: linear-gradient(120deg, rgba(88,166,255,0.07), rgba(64,224,208,0.06), rgba(90,85,230,0.06));
}
@keyframes glBgShift {
  0% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-6%) scale(1.02); }
  100% { transform: translateY(0) scale(1); }
}

/* --- 9. MEDIA QUERIES (Responsiveness) --- */
@media (prefers-reduced-motion: reduce) {
  .gl-bg-overlay { animation: none; opacity: 0.06; }
}
@media (max-width: 780px){
  .header-inner{flex-direction:column;align-items:flex-start;gap:10px}
  .hero{flex-direction:column}
}
@media (max-width: 640px) {
  .card, .dashboard {max-width:98vw; padding: 0.7rem 0.5rem;}
  .dashboard {padding-bottom:1.1rem;}
  .title {font-size: 1.25rem;}
  .bars{width:98%;margin-left:1%;}
}
@media (max-width: 480px){ 
  .card, .dashboard{padding:4px;} 
  .dialogue{padding:.5rem;} 
  .task-table th,.task-table td{font-size:.89rem;}
}
